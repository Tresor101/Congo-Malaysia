<section id="gallery-section" class="py-5" style="background: linear-gradient(135deg, #f0f4f8, #d9e2ec);">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="display-5 mb-3">Photo Gallery</h2>
      <p class="lead text-muted">Celebrating our community's moments and memories in Malaysia</p>
    </div>

    <!-- Enhanced Carousel -->
    <div id="communityGallery" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-touch="true">
      <!-- Improved Indicators -->
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Community meeting - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="1" aria-label="Group photo - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="2" aria-label="Community event - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="3" aria-label="Cultural performance - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="4" aria-label="Networking session - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="5" aria-label="Discussion panel - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="6" aria-label="Community gathering - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="7" aria-label="Event highlights - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="8" aria-label="Group discussion - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="9" aria-label="Cultural exchange - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="10" aria-label="Closing remarks - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="11" aria-label="Community feedback - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="12" aria-label="Future plans - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="13" aria-label="Event overview - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="14" aria-label="Volunteer recognition - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="15" aria-label="Sponsor appreciation - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="16" aria-label="Media coverage - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="17" aria-label="Photo booth fun - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="18" aria-label="Culinary delights - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="19" aria-label="Cultural performances - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="20" aria-label="Networking opportunities - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="21" aria-label="Panel discussions - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="22" aria-label="Community engagement - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="23" aria-label="Event sponsors - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="24" aria-label="Media partners - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="25" aria-label="Volunteer team - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="26" aria-label="Event highlights reel - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="27" aria-label="Photo montage - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="28" aria-label="Behind the scenes - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="29" aria-label="Community impact - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="30" aria-label="Cultural significance - July 17th"></button>
        <button type="button" data-bs-target="#communityGallery" data-bs-slide-to="31" aria-label="Future events - July 17th"></button>
      </div>

      <!-- Enhanced Slides -->
      <div class="carousel-inner">
        <div class="carousel-item active" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-1.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Congolese community meeting with Consulate officials"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Community Registration Day</h3>
                <p class="mb-0 small">July 17th, 2025 – Meeting with the Consulate and Ministry of Foreign Affairs</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-9.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Group photo with Consulate officials"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Group Photo with Consulate Officials</h3>
                <p class="mb-0 small">July 17th, 2025 – A memorable moment with the Consulate team</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-10.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Community cultural performance"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Cultural Performance</h3>
                <p class="mb-0 small">July 17th, 2025 – Enjoying the vibrant cultural performances</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-11.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Networking session with community leaders"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Networking Session</h3>
                <p class="mb-0 small">July 17th, 2025 – Connecting with community leaders and members</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-3.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Discussion panel on community issues"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Discussion Panel</h3>
                <p class="mb-0 small">July 17th, 2025 – Engaging discussions on community issues</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-2.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Community gathering and celebration"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Community Gathering</h3>
                <p class="mb-0 small">October 11th, 2025 – First gathering with the Congolese community in Malaysia</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-4.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Cultural performance at the community event"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Cultural Performance</h3>
                <p class="mb-0 small">October 11th, 2025 – Enjoying the cultural performances at the gathering</p>
              </div>
            </figcaption>
          </figure>
        </div>

        <div class="carousel-item" data-bs-interval="6000">
          <figure class="mb-0">
            <img src="images/july17-2.jpg" 
                 class="d-block w-100 rounded shadow gallery-img" 
                 alt="Community members engaging in discussions"
                 loading="lazy"
                 width="1200"
                 height="450">
            <figcaption class="carousel-caption d-none d-md-block">
              <div class="caption-content bg-dark bg-opacity-75 rounded-3 p-3">
                <h3 class="h5 fw-bold mb-1">Community Engagement</h3>
                <p class="mb-0 small">October 11th, 2025 – Engaging with community members and leaders</p>
              </div>
            </figcaption>
          </figure>
        </div>

      </div>

      <!-- Enhanced Controls -->
      <button class="carousel-control-prev" type="button" data-bs-target="#communityGallery" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">View previous image</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#communityGallery" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">View next image</span>
      </button>
    </div>

    <!-- Add thumbnails navigation -->
    <div class="gallery-thumbs mt-3 d-none d-md-flex">
      <!-- Thumbnail navigation goes here -->
    </div>
  </div>
</section>

<style>
  /* Gallery Styles */
  .gallery-img {
    height: 450px;
    object-fit: cover;
    object-position: center;
  }

  /* Enhanced carousel controls */
  .carousel-control-prev,
  .carousel-control-next {
    width: 5%;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .carousel:hover .carousel-control-prev,
  .carousel:hover .carousel-control-next {
    opacity: 0.8;
  }

  /* Improved indicators */
  .carousel-indicators {
    margin-bottom: 0.5rem;
  }

  .carousel-indicators [data-bs-target] {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin: 0 4px;
    background-color: rgba(255,255,255,0.8);
    border: none;
  }

  /* Caption styling */
  .caption-content {
    backdrop-filter: blur(4px);
    max-width: 90%;
    margin: 0 auto;
  }

  /* Responsive adjustments */
  @media (max-width: 767.98px) {
    .gallery-img {
      height: 300px;
    }
    
    .carousel-caption {
      position: static;
      background: rgba(0,0,0,0.8) !important;
      padding: 1rem !important;
    }
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .carousel-item {
      transition: none;
    }
  }

  /* Loading state */
  .carousel.is-loading {
    min-height: 450px;
    background: #f8f9fa url('loading-spinner.gif') center no-repeat;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Enable keyboard navigation
    const carousel = document.getElementById('communityGallery');
    carousel.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowLeft') {
        carousel.querySelector('.carousel-control-prev').click();
      }
      if (e.key === 'ArrowRight') {
        carousel.querySelector('.carousel-control-next').click();
      }
    });
    
    // Lazy loading optimization
    const images = carousel.querySelectorAll('img[loading="lazy"]');
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            imageObserver.unobserve(img);
          }
        });
      });

      images.forEach(img => imageObserver.observe(img));
    }
  });
</script>
